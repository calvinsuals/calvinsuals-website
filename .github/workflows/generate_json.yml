                run: |
                  git config --global user.name 'github-actions[bot]' # 设置提交者名称
                  git config --global user.email 'github-actions[bot]@users.noreply.github.com' # 设置提交者邮箱
                  
                  echo "--- 开始将文件添加到 Git ---"
                  # 尝试更明确地添加目录和文件
                  git add images/automotive/ images/portrait/
                  git add images/automotive/galleries.json images/portrait/galleries.json images/**/*.json
                  
                  echo "--- 添加文件后的 Git 状态 ---"
                  git status
                  
                  echo "--- 暂存区的文件差异（显示具体更改） ---"
                  # 显示实际差异，不使用 --quiet 以便调试
                  git diff --staged || echo "Diff 未发现暂存区的更改。"
                  
                  echo "--- 检查是否存在用于提交的暂存更改 ---"
                  # 使用变量存储退出代码，方便查看
                  git diff --staged --quiet
                  exit_code=$?
                  echo "命令 'git diff --staged --quiet' 的退出代码: $exit_code"

                  # 退出代码非0表示有更改
                  if [ $exit_code -ne 0 ]; then
                    echo "检测到更改，开始提交和推送..."
                    git commit -m "Automated: 更新画廊 JSON 文件" # 提交信息
                    git push origin main # 推送到 main 分支
                  else
                    echo "未检测到 JSON 文件有更改。" # 如果没有更改则打印信息
                  fi
